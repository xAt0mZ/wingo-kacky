{"version":3,"sources":["components/LoadingSpinner.js","components/ErrorMessage.js","components/header/MapsCounter.js","components/header/index.js","components/body/Filters.js","components/body/MapButton.js","components/body/MapsButtonGroup.js","components/body/MapsRow.js","components/footer/MapDetails.js","components/footer/VideoPlayer.js","components/footer/index.js","models/filters.js","models/map.js","api/index.js","App.js","index.js"],"names":["LoadingSpinner","Spinner","animation","role","size","className","ErrorMessage","Row","MapsCounter","props","finished","total","Header","src","alt","width","height","style","borderRadius","Filters","streamers","options","onStreamerChange","onDateChange","onOrderChange","Form","Col","xs","Select","onChange","e","target","value","map","o","Check","inline","type","id","checked","MapButton","ToggleButton","variant","name","onMapSelection","MapsButtonGroup","selectedId","ButtonGroup","maps","MapsRow","rows","cols","Math","ceil","length","Array","keys","row","slice","MapDetails","selectedMap","minWidth","date","localeDateString","localeTimeString","time","VideoPlayer","url","title","allowFullScreen","Footer","clip","LOCALE_LANG","LOCALE_DATE_OPTIONS","year","month","day","ALL_DAYS","DateField","toLocaleDateString","toLocaleTimeString","Map","streamer","parseDate","str","split","D","M","Y","h","m","s","Date","parse","x","def","parseInt","normalizeValues","key","process","ranges","join","API","get","axios","ErrorScreen","Container","LoadingScreen","extractOptions","groupedMaps","dates","_","chain","filter","sortBy","uniq","concat","App","bind","state","a","res","data","allMaps","valueRanges","r","range","match","values","v","transformClip","undefined","flat","groupBy","Object","selectedStreamer","this","setState","err","selectedDate","includes","orderByDate","selectedMapId","filteredMaps","orderBy","isEmpty","filterAndOrderMaps","finishedMapsCount","totalMapsCount","find","minHeight","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e97a92ae.chunk.js","sourcesContent":["import Spinner from 'react-bootstrap/Spinner';\r\n\r\nexport default function LoadingSpinner() {\r\n  return (\r\n    <Spinner animation=\"border\" role=\"status\" size=\"xxl\">\r\n      <span className=\"visually-hidden\">Loading...</span>\r\n    </Spinner>\r\n  );\r\n}","import Row from 'react-bootstrap/Row';\r\n\r\nexport default function ErrorMessage() {\r\n  return (\r\n    <Row>\r\n      <span className=\"d-block fs-1 mx-auto\">Impossible de récupérer les données</span>\r\n      <span className=\"fs-1 d-block mx-auto\">Recharge la page</span>\r\n    </Row>\r\n  );\r\n}\r\n","export default function MapsCounter(props) {\r\n  return (\r\n    <span className={props.className + \" fs-1\"}>\r\n      {props.finished} / {props.total}\r\n    </span>\r\n  );\r\n}","import MapsCounter from './MapsCounter';\r\n\r\nexport default function Header(props) {\r\n  return (\r\n    <header className=\"py-3 mb-2 border-bottom hstack gap-1\">\r\n      <div className=\"d-flex align-items-center mb-3 mb-md-0\">\r\n        <img\r\n          src=\"https://static-cdn.jtvnw.net/jtv_user_pictures/78ac5f9f-024b-4bf3-9098-e2278ebdc26a-profile_image-70x70.png\"\r\n          alt=\"Wingo logo\"\r\n          width=\"70\"\r\n          height=\"70\"\r\n          className=\"me-2\"\r\n          style={{ borderRadius: \"50%\" }} />\r\n        <span className=\"fs-1\">Wingobear - Kacky 2021</span>\r\n      </div>\r\n      <MapsCounter className=\"ms-auto\" finished={props.finished} total={props.total} />\r\n    </header>\r\n  );\r\n}","import Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\n\r\nexport default function Filters({ streamers, options, onStreamerChange, onDateChange, onOrderChange }) {\r\n  return (\r\n    <Form className=\"ms-1\">\r\n      <Row className=\"align-items-center fs-3\">\r\n        <Col xs={2}>\r\n          <Form.Select aria-label=\"Streamer select\" onChange={(e) => onStreamerChange(e.target.value)}>\r\n            {streamers.map((o) =>\r\n              <option key={o}>{o}</option>\r\n            )}\r\n          </Form.Select>\r\n        </Col>\r\n        <Col xs={4}>\r\n          <Form.Select aria-label=\"Date select\" onChange={(e) => onDateChange(e.target.value)}>\r\n            {options.map((o) =>\r\n              <option key={o}>{o}</option>\r\n            )}\r\n          </Form.Select>\r\n        </Col>\r\n        <Col xs={6}>\r\n          <span>Trier par numéro</span>\r\n          <Form.Check\r\n            inline\r\n            type=\"switch\"\r\n            id=\"custom-switch\"\r\n            className=\"mx-3 fs-4\"\r\n            onChange={(e) => onOrderChange(e.target.checked)}\r\n          />\r\n          <span>ordre de finish</span>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n}","import ToggleButton from 'react-bootstrap/ToggleButton';\r\n\r\nexport default function MapButton(props) {\r\n  const map = props.map;\r\n  return (\r\n    <ToggleButton\r\n      id={`radio-${map.id}`}\r\n      type=\"radio\"\r\n      variant={map.finished ? 'outline-success' : 'outline-danger'}\r\n      name=\"radio\"\r\n      value={map.id}\r\n      checked={props.checked}\r\n      onChange={() => props.onMapSelection(map.id)}\r\n      className=\"m-1 fw-bolder\"\r\n    >\r\n      {map.id}\r\n    </ToggleButton>\r\n  );\r\n}\r\n","import ButtonGroup from 'react-bootstrap/ButtonGroup';\r\n\r\nimport MapButton from './MapButton';\r\n\r\nexport default function MapsButtonGroup(props) {\r\n  const selectedId = props.selectedId;\r\n\r\n  return (\r\n    <ButtonGroup size=\"sm\" className=\"btn-group-justified\">\r\n      {props.maps.map((map) => {\r\n        return (\r\n          <MapButton\r\n            map={map}\r\n            key={map.id}\r\n            checked={selectedId === map.id}\r\n            onMapSelection={props.onMapSelection} />\r\n        );\r\n      })}\r\n    </ButtonGroup>\r\n  );\r\n}\r\n","import Row from 'react-bootstrap/Row';\r\nimport MapsButtonGroup from './MapsButtonGroup';\r\n\r\nexport default function MapsRow(props) {\r\n  let rows = 3;\r\n  let cols = Math.ceil(props.maps.length / rows);\r\n  if (props.maps.length !== 75) {\r\n    rows = 1;\r\n    cols = props.maps.length;\r\n  }\r\n  const selectedId = props.selectedId;\r\n\r\n  return (\r\n    <Row>\r\n      {[...Array(rows).keys()].map((row) =>\r\n        <MapsButtonGroup\r\n          key={row}\r\n          selectedId={selectedId}\r\n          maps={props.maps.slice(row * cols, (row + 1) * cols)}\r\n          onMapSelection={props.onMapSelection} />\r\n      )}\r\n    </Row>\r\n  );\r\n}\r\n","export default function MapDetails(props) {\r\n  const selectedMap = props.map;\r\n  if (!selectedMap || !selectedMap.finished) {\r\n    return (<div></div>);\r\n  }\r\n\r\n  return (\r\n    <div className=\"vstack flex-grow-0 gap-5 mt-5 fs-3\" style={{ minWidth: '25%' }}>\r\n      <span className=\"fs-1\">\r\n        {selectedMap.id}\r\n      </span>\r\n      <div>\r\n        <span className=\"d-block\">\r\n          {selectedMap.date.localeDateString}\r\n        </span>\r\n        <span className=\"d-block\">\r\n          {selectedMap.date.localeTimeString}\r\n        </span>\r\n      </div>\r\n      <span className=\"fs-3\">\r\n        {selectedMap.time}\r\n      </span>\r\n    </div >\r\n  );\r\n}","export default function VideoPlayer({ url }) {\r\n  return (\r\n    <div className=\"w-100 h-100\">\r\n      {url &&\r\n        <iframe\r\n          title=\"Map clip\"\r\n          src={url}\r\n          width=\"100%\" height=\"100%\" allowFullScreen\r\n        ></iframe>}\r\n    </div>\r\n  );\r\n}\r\n","import Row from 'react-bootstrap/Row';\r\nimport MapDetails from './MapDetails';\r\n\r\nimport VideoPlayer from './VideoPlayer';\r\n\r\nexport default function Footer({selectedMap}) {\r\n  return (\r\n    <Row className=\"flex-fill\">\r\n      <div className=\"hstack gap-2\">\r\n        <MapDetails map={selectedMap} />\r\n        <VideoPlayer url={selectedMap ? selectedMap.clip : ''} />\r\n      </div>\r\n    </Row>\r\n  );\r\n}","export const LOCALE_LANG = 'fr-FR';\r\nexport const LOCALE_DATE_OPTIONS = { year: 'numeric', month: 'long', day: 'numeric' };\r\nexport const ALL_DAYS = 'Tous les jours';","import { LOCALE_DATE_OPTIONS, LOCALE_LANG } from \"./filters\";\r\n\r\n/**\r\n * Model for date field in Map\r\n * @param {Date} date \r\n * @returns \r\n */\r\nfunction DateField(date) {\r\n  return {\r\n    date: date,\r\n    localeDateString: date.toLocaleDateString(LOCALE_LANG, LOCALE_DATE_OPTIONS),\r\n    localeTimeString: date.toLocaleTimeString(LOCALE_LANG)\r\n  }\r\n}\r\n\r\n/**\r\n * Model representing a Map\r\n * @param {int} id \r\n * @param {String} streamer \r\n * @param {Boolean} finished \r\n * @param {DateField} date \r\n * @param {String} time \r\n * @param {String} clip \r\n * @returns \r\n */\r\nfunction Map(id, streamer, finished, date, time, clip) {\r\n  return { id, streamer, finished, date, time, clip }\r\n}\r\n\r\nfunction extractStreamer(str) {\r\n  return str.match(/((WINGO)|(JR))!/)[1];\r\n}\r\n\r\nfunction transformClip(str) {\r\n  let clip = str.match(/(https:\\/\\/clips\\.twitch\\.tv\\/)(.+?)(?:\";|$)/);\r\n  if (clip) {\r\n    clip = `${clip[1]}embed?clip=${clip[2]}&parent=${process.env.REACT_APP_IFRAME_PARENT}`;\r\n  } else {\r\n    clip = str.match(/(https:\\/\\/streamable\\.com\\/)(.+?)(?:\";|$)/);\r\n    clip = `${clip[1]}o/${clip[2]}`;\r\n  }\r\n  return clip;\r\n}\r\n\r\nfunction normalizeValues([D, M, Y, h, m, s]) {\r\n  const parse = (x, def = 0) => x ? parseInt(x) : def;\r\n\r\n  D = parse(D);\r\n  M = parse(M, 8) - 1;\r\n  Y = parse(Y, 2021);\r\n  h = parse(h);\r\n  m = parse(m);\r\n  s = parse(s);\r\n  return [Y, M, D, h, m, s];\r\n}\r\n\r\nfunction parseDate(str) {\r\n  const [date, time] = str.split(' ');\r\n  const [D, M, Y] = date.split('/');\r\n  let [h, m, s] = [0, 0, 0];\r\n  if (time) {\r\n    [h, m, s] = time.split(':');\r\n  }\r\n  return new Date(...normalizeValues([D, M, Y, h, m, s]));\r\n}\r\n\r\nexport function extractMaps(data) {\r\n  return data.valueRanges.map((r) => {\r\n    const streamer = extractStreamer(r.range);\r\n\r\n    return r.values.map((v) => {\r\n      let [id, finished, date, time, clip] = v;\r\n\r\n      if (!finished) {\r\n        return new Map(id, streamer, finished);\r\n      }\r\n      date = date && date !== '' ? parseDate(date) : new Date();\r\n      time = time || '';\r\n      clip = clip ? transformClip(clip) : undefined;\r\n      return new Map(id, streamer, finished, new DateField(date), time, clip)\r\n    })\r\n  }).flat();\r\n}","import axios from 'axios';\r\n\r\nconst sheets = ['WINGO', 'JR'];\r\n\r\nconst baseURL = 'https://sheets.googleapis.com/v4/spreadsheets/1Yqkhv4ayhwFkV39W0W7GLt1FnpHLUUXtpgGvRklnDnI/values:batchGet';\r\nconst key = `key=${process.env.REACT_APP_GOOGLE_API_KEY}`;\r\nconst ranges = sheets.map((s) => `ranges=${s}!A2:F33&ranges=${s}!G2:L33&ranges=${s}!M2:R12`).join('&');\r\nconst options = 'valueRenderOption=FORMULA&dateTimeRenderOption=FORMATTED_STRING'\r\nconst url = `${baseURL}?${key}&${ranges}&${options}`\r\n\r\nconst API = {\r\n  get: () => axios.get(url)\r\n}\r\nexport default API;\r\n","import React from 'react';\r\nimport _ from 'lodash-es';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\n\r\nimport LoadingSpinner from './components/LoadingSpinner';\r\nimport ErrorMessage from './components/ErrorMessage';\r\n\r\nimport Header from './components/header'\r\nimport Filters from './components/body/Filters';\r\nimport MapsRow from './components/body/MapsRow';\r\nimport Footer from './components/footer';\r\n\r\nimport { extractMaps } from './models/map';\r\nimport API from './api';\r\nimport { ALL_DAYS } from './models/filters';\r\n\r\nconst ErrorScreen = () =>\r\n  <Container className=\"d-flex align-items-center text-center\" style={{ width: \"100vh\", height: \"100vh\" }}>\r\n    <ErrorMessage />\r\n  </Container>\r\n\r\nconst LoadingScreen = () =>\r\n  <Container className=\"d-flex justify-content-center align-items-center\" style={{ width: \"100vh\", height: \"100vh\" }}>\r\n    <LoadingSpinner></LoadingSpinner>\r\n  </Container>\r\n\r\nfunction extractOptions(groupedMaps) {\r\n  const options = {};\r\n\r\n  for (const streamer in groupedMaps) {\r\n    const maps = groupedMaps[streamer];\r\n    const dates = _.chain(maps)\r\n      .filter({ finished: true })\r\n      .sortBy('date.date')\r\n      .map('date.localeDateString')\r\n      .uniq();\r\n    options[streamer] = _.concat([ALL_DAYS], ...dates);\r\n  }\r\n  return options;\r\n}\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onStreamerChange = this.onStreamerChange.bind(this);\r\n    this.onDateChange = this.onDateChange.bind(this);\r\n    this.onOrderChange = this.onOrderChange.bind(this);\r\n    this.onMapSelection = this.onMapSelection.bind(this);\r\n\r\n    this.state = {};\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const res = await API.get();\r\n      const allMaps = extractMaps(res.data);\r\n\r\n      const maps = _.groupBy(allMaps, 'streamer');\r\n      const options = extractOptions(maps);\r\n      const streamers = Object.keys(maps);\r\n      const selectedStreamer = streamers[0];\r\n\r\n      //TODO: fetch filters from localstorage\r\n      this.setState({\r\n        maps,\r\n        options,\r\n        streamers,\r\n        selectedStreamer\r\n      });\r\n    } catch (err) {\r\n      this.setState({ err })\r\n    }\r\n  }\r\n\r\n  onStreamerChange(selectedStreamer) {\r\n    const options = this.state.options[selectedStreamer];\r\n    const selectedDate = _.includes(options, this.state.selectedDate) ? this.state.selectedDate : ALL_DAYS;\r\n\r\n    this.setState({\r\n      selectedStreamer,\r\n      selectedDate\r\n    });\r\n  }\r\n\r\n  onDateChange(selectedDate) {\r\n    this.setState({ selectedDate });\r\n  }\r\n\r\n  onOrderChange(orderByDate) {\r\n    this.setState({ orderByDate });\r\n  }\r\n\r\n  onMapSelection(selectedMapId) {\r\n    this.setState({ selectedMapId });\r\n  }\r\n\r\n  filterAndOrderMaps() {\r\n    const allMaps = this.state.maps[this.state.selectedStreamer] || [];\r\n    let filteredMaps = allMaps;\r\n\r\n    if (this.state.orderByDate) {\r\n      filteredMaps = _.orderBy(filteredMaps, 'date.date');\r\n    }\r\n    if (this.state.selectedDate && this.state.selectedDate !== ALL_DAYS) {\r\n      filteredMaps = _.filter(filteredMaps, (m) => m.finished && m.date.localeDateString === this.state.selectedDate)\r\n    }\r\n    return [allMaps, filteredMaps];\r\n  }\r\n\r\n  render() {\r\n    if (this.state.err) {\r\n      return <ErrorScreen />\r\n    }\r\n\r\n    if (_.isEmpty(this.state.maps)) {\r\n      return <LoadingScreen />\r\n    }\r\n\r\n    const [allMaps, filteredMaps] = this.filterAndOrderMaps();\r\n\r\n    const finishedMapsCount = _.filter(allMaps, { finished: true }).length;\r\n    const totalMapsCount = allMaps.length;\r\n\r\n    const selectedMapId = this.state.selectedMapId;\r\n\r\n    const selectedMap = _.find(allMaps, { id: selectedMapId });\r\n    const options = this.state.options[this.state.selectedStreamer];\r\n\r\n    return (\r\n      <Container className=\"vstack gap-2 p-0 pb-2 text-center\" style={{ minHeight: \"100vh\" }}>\r\n        <Header finished={finishedMapsCount} total={totalMapsCount} />\r\n        <Filters streamers={this.state.streamers} onStreamerChange={this.onStreamerChange} options={options} onDateChange={this.onDateChange} onOrderChange={this.onOrderChange} />\r\n        <MapsRow maps={filteredMaps} selectedId={selectedMapId} onMapSelection={this.onMapSelection} />\r\n        <Footer selectedMap={selectedMap} />\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import reportWebVitals from './reportWebVitals';\n\nimport './index.css'\n\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// // If you want to start measuring performance in your app, pass a function\n// // to log results (for example: reportWebVitals(console.log))\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}