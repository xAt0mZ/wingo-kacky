(this.webpackJsonpkacky=this.webpackJsonpkacky||[]).push([[0],{53:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(38),r=a.n(c),i=(a(53),a(12)),l=a(28),o=a.n(l),d=a(39),h=a(40),u=a(41),j=a(13),m=a(42),p=a(47),b=a(15),f=a(99),O=a(25),g=a(43),x=a(0);function v(){return Object(x.jsx)(g.a,{animation:"border",role:"status",size:"xxl",children:Object(x.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}var S=a(10);function y(){return Object(x.jsxs)(S.a,{children:[Object(x.jsx)("span",{className:"d-block fs-1 mx-auto",children:"Impossible de r\xe9cup\xe9rer les donn\xe9es"}),Object(x.jsx)("span",{className:"fs-1 d-block mx-auto",children:"Recharge la page"})]})}function k(e){return Object(x.jsxs)("span",{className:e.className+" fs-1",children:[e.finished," / ",e.total]})}function N(e){return Object(x.jsxs)("header",{className:"py-3 mb-2 border-bottom hstack gap-1",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-md-0",children:[Object(x.jsx)("img",{src:"https://static-cdn.jtvnw.net/jtv_user_pictures/78ac5f9f-024b-4bf3-9098-e2278ebdc26a-profile_image-70x70.png",alt:"Wingo logo",width:"70",height:"70",className:"me-2",style:{borderRadius:"50%"}}),Object(x.jsx)("span",{className:"fs-1",children:"Wingobear - Kacky 2021"})]}),Object(x.jsx)(k,{className:"ms-auto",finished:e.finished,total:e.total})]})}var D=a(19),C=a(17);function M(e){var t=e.streamers,a=e.options,n=e.onStreamerChange,s=e.onDateChange,c=e.onOrderChange;return Object(x.jsx)(D.a,{className:"ms-1",children:Object(x.jsxs)(S.a,{className:"align-items-center fs-3",children:[Object(x.jsx)(C.a,{xs:2,children:Object(x.jsx)(D.a.Select,{"aria-label":"Streamer select",onChange:function(e){return n(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{children:e},e)}))})}),Object(x.jsx)(C.a,{xs:4,children:Object(x.jsx)(D.a.Select,{"aria-label":"Date select",onChange:function(e){return s(e.target.value)},children:a.map((function(e){return Object(x.jsx)("option",{children:e},e)}))})}),Object(x.jsxs)(C.a,{xs:6,children:[Object(x.jsx)("span",{children:"Trier par num\xe9ro"}),Object(x.jsx)(D.a.Check,{inline:!0,type:"switch",id:"custom-switch",className:"mx-3 fs-4",onChange:function(e){return c(e.target.checked)}}),Object(x.jsx)("span",{children:"ordre de finish"})]})]})})}var w=a(44),I=a(48);function R(e){var t=e.map;return Object(x.jsx)(I.a,{id:"radio-".concat(t.id),type:"radio",variant:t.finished?"outline-success":"outline-danger",name:"radio",value:t.id,checked:e.checked,onChange:function(){return e.onMapSelection(t.id)},className:"m-1 fw-bolder",children:t.id})}function T(e){var t=e.selectedId;return Object(x.jsx)(w.a,{size:"sm",className:"btn-group-justified",children:e.maps.map((function(a){return Object(x.jsx)(R,{map:a,checked:t===a.id,onMapSelection:e.onMapSelection},a.id)}))})}function G(e){var t=3,a=Math.ceil(e.maps.length/t);75!==e.maps.length&&(t=1,a=e.maps.length);var n=e.selectedId;return Object(x.jsx)(S.a,{children:Object(b.a)(Array(t).keys()).map((function(t){return Object(x.jsx)(T,{selectedId:n,maps:e.maps.slice(t*a,(t+1)*a),onMapSelection:e.onMapSelection},t)}))})}function A(e){var t=e.map;return t&&t.finished?Object(x.jsxs)("div",{className:"vstack flex-grow-0 gap-5 mt-5 fs-3",style:{minWidth:"25%"},children:[Object(x.jsx)("span",{className:"fs-1",children:t.id}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"d-block",children:t.date.localeDateString}),Object(x.jsx)("span",{className:"d-block",children:t.date.localeTimeString})]}),Object(x.jsx)("span",{className:"fs-3",children:t.time})]}):Object(x.jsx)("div",{})}function F(e){var t=e.url;return Object(x.jsx)("div",{className:"w-100 h-100",children:t&&Object(x.jsx)("iframe",{title:"Map clip",src:t,width:"100%",height:"100%",allowFullScreen:!0})})}function L(e){var t=e.selectedMap;return Object(x.jsx)(S.a,{className:"flex-fill",children:Object(x.jsxs)("div",{className:"hstack gap-2",children:[Object(x.jsx)(A,{map:t}),Object(x.jsx)(F,{url:t?t.clip:""})]})})}var W=a(45),B="fr-FR",z={year:"numeric",month:"long",day:"numeric"},J="Tous les jours";function U(e){return{date:e,localeDateString:e.toLocaleDateString(B,z),localeTimeString:e.toLocaleTimeString(B)}}function _(e,t,a,n,s,c){return{id:e,streamer:t,finished:a,date:n,time:s,clip:c}}function E(e){var t=e.split(" "),a=Object(i.a)(t,2),n=a[0],s=a[1],c=n.split("/"),r=Object(i.a)(c,3),l=r[0],o=r[1],d=r[2],h=0,u=0,j=0;if(s){var m=s.split(":"),p=Object(i.a)(m,3);h=p[0],u=p[1],j=p[2]}return Object(W.a)(Date,Object(b.a)(function(e){var t=Object(i.a)(e,6),a=t[0],n=t[1],s=t[2],c=t[3],r=t[4],l=t[5],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e?parseInt(e):t};return a=o(a),n=o(n,8)-1,[s=o(s,2021),n,a,c=o(c),r=o(r),l=o(l)]}([l,o,d,h,u,j])))}var X=a(46),q=a.n(X),H="key=".concat("AIzaSyCXaXgfyz_Gneiis7D3yJk22hUQ9NOssUg"),$=["WINGO","JR"].map((function(e){return"ranges=".concat(e,"!A2:F33&ranges=").concat(e,"!G2:L33&ranges=").concat(e,"!M2:R12")})).join("&"),K="".concat("https://sheets.googleapis.com/v4/spreadsheets/1Yqkhv4ayhwFkV39W0W7GLt1FnpHLUUXtpgGvRklnDnI/values:batchGet","?").concat(H,"&").concat($,"&").concat("valueRenderOption=FORMULA&dateTimeRenderOption=FORMATTED_STRING"),Q={get:function(){return q.a.get(K)}},V=function(){return Object(x.jsx)(O.a,{className:"d-flex align-items-center text-center",style:{width:"100vh",height:"100vh"},children:Object(x.jsx)(y,{})})},Y=function(){return Object(x.jsx)(O.a,{className:"d-flex justify-content-center align-items-center",style:{width:"100vh",height:"100vh"},children:Object(x.jsx)(v,{})})};function P(e){var t={};for(var a in e){var n=e[a],s=f.a.chain(n).filter({finished:!0}).sortBy("date.date").map("date.localeDateString").uniq();t[a]=f.a.concat.apply(f.a,[[J]].concat(Object(b.a)(s)))}return t}var Z=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onStreamerChange=n.onStreamerChange.bind(Object(j.a)(n)),n.onDateChange=n.onDateChange.bind(Object(j.a)(n)),n.onOrderChange=n.onOrderChange.bind(Object(j.a)(n)),n.onMapSelection=n.onMapSelection.bind(Object(j.a)(n)),n.state={},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,a,n,s,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.get();case 3:t=e.sent,l=t.data,a=l.valueRanges.map((function(e){var t=e.range.match(/((WINGO)|(JR))!/)[1];return e.values.map((function(e){var a=Object(i.a)(e,5),n=a[0],s=a[1],c=a[2],r=a[3],l=a[4];return s?(c=c&&""!==c?E(c):new Date,r=r||"",l=l?function(e){var t=e.match(/(https:\/\/clips\.twitch\.tv\/)(.+?)(?:";|$)/);return t?t="".concat(t[1],"embed?clip=").concat(t[2],"&parent=").concat("xat0mz.github.io"):(t=e.match(/(https:\/\/streamable\.com\/)(.+?)(?:";|$)/),t="".concat(t[1],"o/").concat(t[2])),t}(l):void 0,new _(n,t,s,new U(c),r,l)):new _(n,t,s)}))})).flat(),n=f.a.groupBy(a,"streamer"),s=P(n),c=Object.keys(n),r=c[0],this.setState({maps:n,options:s,streamers:c,selectedStreamer:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({err:e.t0});case 15:case"end":return e.stop()}var l}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onStreamerChange",value:function(e){var t=this.state.options[e],a=f.a.includes(t,this.state.selectedDate)?this.state.selectedDate:J;this.setState({selectedStreamer:e,selectedDate:a})}},{key:"onDateChange",value:function(e){this.setState({selectedDate:e})}},{key:"onOrderChange",value:function(e){this.setState({orderByDate:e})}},{key:"onMapSelection",value:function(e){this.setState({selectedMapId:e})}},{key:"filterAndOrderMaps",value:function(){var e=this,t=this.state.maps[this.state.selectedStreamer]||[],a=t;return this.state.orderByDate&&(a=f.a.orderBy(a,"date.date")),this.state.selectedDate&&this.state.selectedDate!==J&&(a=f.a.filter(a,(function(t){return t.finished&&t.date.localeDateString===e.state.selectedDate}))),[t,a]}},{key:"render",value:function(){if(this.state.err)return Object(x.jsx)(V,{});if(f.a.isEmpty(this.state.maps))return Object(x.jsx)(Y,{});var e=this.filterAndOrderMaps(),t=Object(i.a)(e,2),a=t[0],n=t[1],s=f.a.filter(a,{finished:!0}).length,c=a.length,r=this.state.selectedMapId,l=f.a.find(a,{id:r}),o=this.state.options[this.state.selectedStreamer];return Object(x.jsxs)(O.a,{className:"vstack gap-2 p-0 pb-2 text-center",style:{minHeight:"100vh"},children:[Object(x.jsx)(N,{finished:s,total:c}),Object(x.jsx)(M,{streamers:this.state.streamers,onStreamerChange:this.onStreamerChange,options:o,onDateChange:this.onDateChange,onOrderChange:this.onOrderChange}),Object(x.jsx)(G,{maps:n,selectedId:r,onMapSelection:this.onMapSelection}),Object(x.jsx)(L,{selectedMap:l})]})}}]),a}(s.a.Component);r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(Z,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.e97a92ae.chunk.js.map